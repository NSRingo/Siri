#!name = ï£¿ iRingo: ğŸ” Search
#!desc = iOS 17.6â¬‡ï¸\nå…¨é¢è‡ªå®šä¹‰ã€ŒSiriä¸æœç´¢ã€ä¸­çš„ã€ŒSiri å»ºè®®ã€åŠŸèƒ½ã€‚\nâš ï¸æœ¬æ¨¡å—ä¸å«è‡ªå®šä¹‰ã€ŒSiriä¸æœç´¢ã€ä¸­çš„ã€Œè¯¢é—® Siriã€åŠŸèƒ½ã€‚
#!openUrl = http://boxjs.com/#/app/iRingo.Spotlight
#!author = VirgilClyne[https://github.com/VirgilClyne]
#!manual = https://nsringo.github.io/guide/Siri/siri-and-search
#!icon = https://developer.apple.com/assets/elements/icons/spotlight/spotlight-128x128.png
#!tag = ï£¿ iRingo
#!system = iOS,iPadOS,watchOS
#!system_version = 15

[Argument]
CountryCode = select,"SG","AUTO","CN","HK","TW","US","JP","AU","GB","KR","CA","IE",tag=å›½å®¶æˆ–åœ°åŒºä»£ç ,desc=ä¸åŒå›½å®¶æˆ–åœ°åŒºæä¾›çš„å†…å®¹æˆ–æœ‰å·®åˆ«ï¼Œæ­¤é€‰é¡¹åŒæ—¶ä¼šå½±å“åˆ†é…ç»™æ‚¨ä¸åŒåœ°åŒºçš„ Siri æœåŠ¡å™¨ã€‚
Domains = input,"web,itunes,app_store,movies,restaurants,maps",tag=æœç´¢é¢†åŸŸ,desc=å¯ç”¨æœç´¢çš„é¢†åŸŸï¼Œé¢†åŸŸæ•°æ®ç”±å›½å®¶æˆ–åœ°åŒºè®¾ç½®å†³å®šï¼Œæ­¤é€‰é¡¹ä»…å¼€å¯æœç´¢çš„é¢†åŸŸï¼Œä¸ä»£è¡¨è®¾ç½®çš„åœ°åŒºä¸€å®šæœ‰ç›¸åº”çš„æ•°æ®å’ŒæœåŠ¡ã€‚
Functions = input,"flightutilities,lookup,mail,messages,news,safari,siri,spotlight,visualintelligence",tag=åŠŸèƒ½,desc=å¯ç”¨çš„ã€ŒSiri å»ºè®®ã€åŠŸèƒ½ï¼Œæœªé€‰çš„åŠŸèƒ½ä¸ä»£è¡¨å…³é—­ï¼Œä»…ä»£è¡¨è¿˜åŸåˆ°è¯¥åœ°åŒºé»˜è®¤è®¾ç½®çŠ¶æ€ã€‚
SafariSmartHistory = switch,true,tag=Safari æ™ºèƒ½å†å²è®°å½•,desc=æ˜¯å¦åœ¨ Safari æµè§ˆå™¨ä¸­å¯ç”¨åŸºäºå†å²è®°å½•çš„Siriå»ºè®®åŠŸèƒ½ï¼Œå¯ç”¨åå°†åœ¨Safariæµè§ˆå™¨èµ·å§‹é¡µæ¨èåŸºäºæ—¶é—´åœ°ç‚¹è·¨è®¾å¤‡ç­‰çš„ç›¸å…³æµè§ˆè®°å½•ã€‚
LogLevel = select,"WARN","OFF","ERROR","INFO","DEBUG","ALL",tag=[è°ƒè¯•] æ—¥å¿—ç­‰çº§,desc=é€‰æ‹©è„šæœ¬æ—¥å¿—çš„è¾“å‡ºç­‰çº§ï¼Œä½äºæ‰€é€‰ç­‰çº§çš„æ—¥å¿—å°†å…¨éƒ¨è¾“å‡ºã€‚

[Script]
# Bag (iOS/macOS)
http-request ^https?:\/\/api2?\.smoot\.apple\.(com|cn)\/bag script-path=https://github.com/NSRingo/Siri/releases/latest/download/request.bundle.js, tag=â­• Siri.Bag.request, argument=[{CountryCode},{Domains},{Functions},{SafariSmartHistory},{LogLevel}]
http-response ^https?:\/\/api2?\.smoot\.apple\.(com|cn)\/bag script-path=https://github.com/NSRingo/Siri/releases/latest/download/response.bundle.js, requires-body=1, tag=â­• Siri.Bag.response, argument=[{CountryCode},{Domains},{Functions},{SafariSmartHistory},{LogLevel}]
# Siri Suggestions & Look Up Search (iOS/macOS)
http-request ^https?:\/\/api(2|-.+)\.smoot\.apple\.(com|cn)\/search script-path=https://github.com/NSRingo/Siri/releases/latest/download/request.bundle.js, tag=ğŸ” Siri.Search.request, argument=[{CountryCode},{Domains},{Functions},{SafariSmartHistory},{LogLevel}]
http-response ^https?:\/\/api(2|-.+)\.smoot\.apple\.(com|cn)\/search script-path=https://github.com/NSRingo/Siri/releases/latest/download/response.bundle.js, requires-body=1, tag=ğŸ” Siri.Search.response, argument=[{CountryCode},{Domains},{Functions},{SafariSmartHistory},{LogLevel}]
# Flight Search (iOS/macOS)
http-request ^https?:\/\/api(2|-.+)\.smoot\.apple\.(com|cn)\/flight script-path=https://github.com/NSRingo/Siri/releases/latest/download/request.bundle.js, tag=ğŸ›« Siri.Flight.request, argument=[{CountryCode},{Domains},{Functions},{SafariSmartHistory},{LogLevel}]

[MITM]
hostname = api*.smoot.apple.com, api.smoot.apple.cn
