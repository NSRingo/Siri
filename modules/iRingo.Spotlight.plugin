#!name = Ô£ø iRingo: üîç Spotlight
#!desc = macOS 14.5‚¨áÔ∏è\nÂÖ®Èù¢Ëá™ÂÆö‰πâ„ÄåSiri‰∏éËÅöÁÑ¶„Äç‰∏≠ÁöÑ„ÄåSiri Âª∫ËÆÆ„ÄçÂäüËÉΩ„ÄÇ\n‚ö†Ô∏èÊú¨Ê®°Âùó‰∏çÂê´Ëá™ÂÆö‰πâ„ÄåSiri‰∏éËÅöÁÑ¶„Äç‰∏≠ÁöÑ„ÄåËØ¢ÈóÆ Siri„ÄçÂäüËÉΩ„ÄÇ
#!openUrl = http://boxjs.com/#/app/iRingo.Spotlight
#!author = VirgilClyne[https://github.com/VirgilClyne]
#!manual = https://nsringo.github.io/guide/Siri/siri-and-search
#!icon = https://developer.apple.com/assets/elements/icons/spotlight/spotlight-128x128.png
#!tag = Ô£ø iRingo
#!system = macOS
#!system_version = 15

[Argument]
CountryCode = select,"SG","AUTO","CN","HK","TW","US","JP","AU","GB","KR","CA","IE",tag=ÂõΩÂÆ∂ÊàñÂú∞Âå∫‰ª£Á†Å,desc=‰∏çÂêåÂõΩÂÆ∂ÊàñÂú∞Âå∫Êèê‰æõÁöÑÂÜÖÂÆπÊàñÊúâÂ∑ÆÂà´ÔºåÊ≠§ÈÄâÈ°πÂêåÊó∂‰ºöÂΩ±ÂìçÂàÜÈÖçÁªôÊÇ®‰∏çÂêåÂú∞Âå∫ÁöÑ Siri ÊúçÂä°Âô®„ÄÇ
Domains = input,"web,itunes,app_store,movies,restaurants,maps",tag=ÊêúÁ¥¢È¢ÜÂüü,desc=ÂêØÁî®ÊêúÁ¥¢ÁöÑÈ¢ÜÂüüÔºåÈ¢ÜÂüüÊï∞ÊçÆÁî±ÂõΩÂÆ∂ÊàñÂú∞Âå∫ËÆæÁΩÆÂÜ≥ÂÆöÔºåÊ≠§ÈÄâÈ°π‰ªÖÂºÄÂêØÊêúÁ¥¢ÁöÑÈ¢ÜÂüüÔºå‰∏ç‰ª£Ë°®ËÆæÁΩÆÁöÑÂú∞Âå∫‰∏ÄÂÆöÊúâÁõ∏Â∫îÁöÑÊï∞ÊçÆÂíåÊúçÂä°„ÄÇ
Functions = input,"flightutilities,lookup,mail,messages,news,safari,siri,spotlight,visualintelligence",tag=ÂäüËÉΩ,desc=ÂêØÁî®ÁöÑ„ÄåSiri Âª∫ËÆÆ„ÄçÂäüËÉΩÔºåÊú™ÈÄâÁöÑÂäüËÉΩ‰∏ç‰ª£Ë°®ÂÖ≥Èó≠Ôºå‰ªÖ‰ª£Ë°®ËøòÂéüÂà∞ËØ•Âú∞Âå∫ÈªòËÆ§ËÆæÁΩÆÁä∂ÊÄÅ„ÄÇ
SafariSmartHistory = switch,true,tag=Safari Êô∫ËÉΩÂéÜÂè≤ËÆ∞ÂΩï,desc=ÊòØÂê¶Âú® Safari ÊµèËßàÂô®‰∏≠ÂêØÁî®Âü∫‰∫éÂéÜÂè≤ËÆ∞ÂΩïÁöÑSiriÂª∫ËÆÆÂäüËÉΩÔºåÂêØÁî®ÂêéÂ∞ÜÂú®SafariÊµèËßàÂô®Ëµ∑ÂßãÈ°µÊé®ËçêÂü∫‰∫éÊó∂Èó¥Âú∞ÁÇπË∑®ËÆæÂ§áÁ≠âÁöÑÁõ∏ÂÖ≥ÊµèËßàËÆ∞ÂΩï„ÄÇ
LogLevel = select,"WARN","OFF","ERROR","INFO","DEBUG","ALL",tag=[Ë∞ÉËØï] Êó•ÂøóÁ≠âÁ∫ß,desc=ÈÄâÊã©ËÑöÊú¨Êó•ÂøóÁöÑËæìÂá∫Á≠âÁ∫ßÔºå‰Ωé‰∫éÊâÄÈÄâÁ≠âÁ∫ßÁöÑÊó•ÂøóÂ∞ÜÂÖ®ÈÉ®ËæìÂá∫„ÄÇ

[Rule]
# > Look Up (Only for Wikipedia@macOS, TUN Mode enabled required)
PROCESS-NAME,LookupViewService
DOMAIN,lookup-api.apple.com
DOMAIN,lookup-api.apple.com.edgekey.net
DOMAIN,e16991.b.akamaiedge.net

[Script]
# Bag (iOS/macOS)
http-request ^https?:\/\/api2?\.smoot\.apple\.(com|cn)\/bag script-path=https://github.com/NSRingo/Siri/releases/download/v4.1.0/request.bundle.js, tag=‚≠ï Siri.Bag.request, argument=[{CountryCode},{Domains},{Functions},{SafariSmartHistory},{LogLevel}]
http-response ^https?:\/\/api2?\.smoot\.apple\.(com|cn)\/bag script-path=https://github.com/NSRingo/Siri/releases/download/v4.1.0/response.bundle.js, requires-body=1, tag=‚≠ï Siri.Bag.response, argument=[{CountryCode},{Domains},{Functions},{SafariSmartHistory},{LogLevel}]
# Siri Suggestions & Look Up Search (iOS/macOS)
http-request ^https?:\/\/api(2|-.+)\.smoot\.apple\.(com|cn)\/search script-path=https://github.com/NSRingo/Siri/releases/download/v4.1.0/request.bundle.js, tag=üîç Siri.Search.request, argument=[{CountryCode},{Domains},{Functions},{SafariSmartHistory},{LogLevel}]
http-response ^https?:\/\/api(2|-.+)\.smoot\.apple\.(com|cn)\/search script-path=https://github.com/NSRingo/Siri/releases/download/v4.1.0/response.bundle.js, requires-body=1, tag=üîç Siri.Search.response, argument=[{CountryCode},{Domains},{Functions},{SafariSmartHistory},{LogLevel}]
# Siri Infomation Card (macOS)
http-request ^https?:\/\/api(2|-.+)\.smoot\.apple\.(com|cn)\/card script-path=https://github.com/NSRingo/Siri/releases/download/v4.1.0/request.bundle.js, tag=üìá Siri.Card.request, argument=[{CountryCode},{Domains},{Functions},{SafariSmartHistory},{LogLevel}]
http-response ^https?:\/\/api(2|-.+)\.smoot\.apple\.(com|cn)\/card script-path=https://github.com/NSRingo/Siri/releases/download/v4.1.0/response.bundle.js, requires-body=1, tag=üìá Siri.Card.response, argument=[{CountryCode},{Domains},{Functions},{SafariSmartHistory},{LogLevel}]
# Flight Search (iOS/macOS)
http-request ^https?:\/\/api(2|-.+)\.smoot\.apple\.(com|cn)\/flight script-path=https://github.com/NSRingo/Siri/releases/download/v4.1.0/request.bundle.js, tag=üõ´ Siri.Flight.request, argument=[{CountryCode},{Domains},{Functions},{SafariSmartHistory},{LogLevel}]

[MITM]
hostname = api*.smoot.apple.com, api.smoot.apple.cn
